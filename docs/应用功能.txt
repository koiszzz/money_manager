一、版本范围（Final V1）

单机本地版：无登录、无云同步、无任何联网能力
单用户使用：不支持多人协作
平台建议：iOS / Android（本地数据库 SQLite）
本地能力：通知提醒、文件导入导出、应用锁
二、全局交互规则（所有页面通用）

底部导航：首页 / 账单 / 记一笔(悬浮按钮) / 报表 / 预算 / 设置
时间口径：所有统计按“账单发生时间”计算
金额显示：收入为正向样式、支出为负向样式、转账中性样式
数据一致性：新增/编辑/删除账单后，实时刷新首页汇总、报表、预算、账户余额
返回逻辑：从列表进详情，返回原筛选和滚动位置保持不变
删除保护：删除动作均二次确认，可提供短时撤销（3~5 秒 Toast）
三、页面级详细说明

1) 启动页 / 应用锁页

展示内容：
启动 Logo（1~2 秒）
若开启应用锁，进入 PIN/生物识别验证页
交互逻辑：
启动后判断是否开启应用锁
验证成功进入首页；失败可重试，超过阈值触发冷却
忘记 PIN：提示“清除本地数据后重置”（避免后门）
2) 首页（Dashboard）

展示内容：
顶部月份切换（< 2026年02月 >）
汇总卡片：本月收入 / 支出 / 结余
预算卡片：总预算、已用比例、剩余金额、超支标记
最近账单列表（默认最近 10 条）
交互逻辑：
左右切换月份，所有卡片与列表联动刷新
点击“收入/支出/结余”卡片 → 跳转账单页并自动带筛选条件
点击预算卡片 → 跳转预算页
点击最近账单某条 → 账单详情页
点击“+记一笔” → 打开记一笔页（默认支出）
3) 记一笔页（核心流程）

展示内容：
顶部切换：支出 | 收入 | 转账
金额输入区（数字键盘）
分类区（网格）
字段区：账户、时间、备注、标签（转账时为“转出账户/转入账户”）
底部按钮：保存、保存并再记一笔
交互逻辑：
默认聚焦金额，输入后才允许保存
支出/收入：必须选择分类与账户
转账：必须选择转出和转入账户，且两者不能相同
时间默认“当前时间”，可改成历史时间（补记）
保存成功后：
保存：返回来源页并刷新
保存并再记一笔：清空金额，保留上次分类和账户（提升效率）
异常校验：
金额 <= 0 禁止保存
信用卡还款可作为“转账特例”处理（转到信用卡账户）
4) 账单页（列表 + 筛选）

展示内容：
顶部：月份选择、搜索入口、筛选入口
列表：按日期分组（如 今天 / 昨天 / 2月18日）
每条：分类图标、分类名、备注、账户、金额
交互逻辑：
上拉加载当月更多记录（若分页）
搜索支持：备注关键词、金额（精确/区间）
筛选维度：类型、分类、账户、标签、金额区间
点击账单 → 账单详情页
左滑操作：删除 / 复制
删除后：
立即从列表移除
回算账户余额、预算、统计
提供撤销入口（可选）
5) 账单详情/编辑页

展示内容：
全字段展示：类型、金额、分类、账户、时间、备注、标签
底部操作：保存修改、删除、复制为新账单
交互逻辑：
任意字段可编辑；类型切换时动态切换字段（如转账字段）
保存修改后回到来源列表，保持原筛选
删除需二次确认
复制为新账单：进入记一笔页并预填字段，用户确认后保存
6) 报表页

展示内容：
时间维度切换：月 / 年
图表模块：
支出分类饼图
收支趋势图（按日/按月）
分类排行（金额、占比）
交互逻辑：
切换月份/年份，全部图表联动刷新
点击饼图某分类 → 跳到账单页并自动筛选该分类
点击趋势图某点 → 打开对应日期账单列表
空数据场景展示“去记一笔”引导按钮
7) 预算页

展示内容：
总预算卡：预算总额、已用、剩余、使用进度
分类预算列表：每类预算、已用、剩余、状态（正常/预警/超支）
交互逻辑：
首次进入无预算：引导“设置本月总预算”
设置/编辑总预算后立即生效
分类预算可单独开关（不设即不限制）
预警阈值（如 80%）可配置
超支触发本地通知（若授权）
月切换时读取对应月份预算，不自动继承（V1 简化）
8) 设置页（含二级功能）

展示内容：

模块入口：账户管理、分类标签、周期记账、提醒设置、数据备份恢复、显示与安全、关于
交互逻辑（按二级页）：

账户管理

展示：账户列表、余额、账户类型
交互：新增/编辑/删除账户；删除前校验是否有关联账单（有则禁止或提示迁移）
分类与标签

展示：支出分类、收入分类、标签
交互：新增/编辑/排序/禁用；禁用后历史账单保留映射
周期记账

展示：周期任务（金额、频率、下次执行日、状态）
交互：新增规则（日/周/月）；到期自动生成“待确认账单”；用户确认后入账
提醒设置

展示：每日提醒时间、预算预警开关、周期账单提醒开关
交互：仅本地通知；未授权时引导系统授权
数据管理（重点）

展示：导出备份、导入恢复、清空全部数据
交互：
导出：生成本地备份文件（建议 JSON + 校验码）
导入：先校验文件格式，再二次确认覆盖
清空：强提醒 + 二次确认 + PIN 校验（若开启）
显示与安全

展示：深色模式、货币单位、千分位格式、应用锁设置
交互：修改即时生效；应用锁下次冷启动生效
四、核心业务对象（用于研发对齐）

账单：id, type(支出/收入/转账), amount, categoryId, accountId, transferInAccountId, occurredAt, note, tags, createdAt, updatedAt
账户：id, name, type(现金/借记卡/信用卡), balance, billingDay, repaymentDay, enabled
预算：id, month, totalAmount, warningThreshold
分类：id, type(支出/收入), name, icon, sort, enabled
周期任务：id, templateBill, rule, nextRunAt, autoGenerate, enabled
五、关键计算规则（必须统一）

收支统计：
收入总额 = 所有收入账单金额之和
支出总额 = 所有支出账单金额之和
结余 = 收入 - 支出
转账：
不进入收入/支出统计
转出账户余额减少，转入账户余额增加
预算消耗：
仅支出账单参与预算计算（收入、转账不计）
时间归属：
账单归属月份 = occurredAt 所在自然月
编辑影响：
若修改金额/类型/时间/账户，需先冲销旧影响，再应用新影响
六、V1 验收清单（上线前）

能在离线环境完整使用全部核心功能
新增/编辑/删除账单后，各页面统计一致
切月后首页/报表/预算数据一致
本地备份导出、恢复可用且数据完整
应用锁、通知权限、异常输入校验均正常